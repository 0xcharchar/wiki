<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

<title>LinkENS</title>

<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
</style>
<link rel="stylesheet" href="/wiki/style.css" />
</head>

<body>
<header id="banner">
<h1><a href="/wiki">charchar.eth wiki</a></h1>
<nav>
<ul>
<li><a href="/wiki">Home</a></li>
</ul>
</nav>
</header>

<main>
<h1 id="LinkENS">LinkENS</h1>
<h2 id="Running Expenses">Running Expenses</h2>
<ul>
<li>Netlify Functions: 125k requests and 100h per month, free</li>
<li>Fleek: 250min build and 50GB bandwidth, free</li>
<li>Storage: 1TB for 1yr, free</li>
<li>ENS: $5USD + gas per year</li>
<li>DNS: $8.35USD 2 years</li>
<li>Email: $10.10 USD 1 year</li>
</ul>
<h2 id="UI">UI</h2>
<ul>
<li><span class="done0"></span>gradient hover state needs to shift right, not left. Left side should be just the darker blue</li>
<li><span class="done4"></span>hover state for text links in menu</li>
<li><span class="done4"></span>dark/light theme toggle</li>
<li><span class="done4"></span>dark theme</li>
<li><span class="done0"></span>add in logo:
<ul>
<li><a href="https://css-tricks.com/scale-svg/">https://css-tricks.com/scale-svg/</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio">https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio</a></li>
</ul></li>
<li><span class="done4"></span>fix colours for text and links</li>
<li><span class="done0"></span>the bloody button outlines</li>
<li><span class="done0"></span>button shadows</li>
<li><span class="done0"></span>mobile style</li>
</ul>
<h2 id="Features">Features</h2>
<ul>
<li><span class="done4"></span>connect wallet</li>
<li>[-] L2 subdomains and resolvers:
<ul>
<li><a href="https://discord.com/channels/742384562646286509/888239500130672640/903162058110042132">https://discord.com/channels/742384562646286509/888239500130672640/903162058110042132</a></li>
<li><a href="https://github.com/ethereum/EIPs/pull/4346">https://github.com/ethereum/EIPs/pull/4346</a></li>
<li>see <a href="#L2 notes" title="wikilink">#L2 notes</a></li>
</ul></li>
<li><span class="done2"></span>user page in svelte but deployed as single file from serverless function:
<ul>
<li><span class="done4"></span>script to build and save user site in backend folder</li>
<li><span class="done0"></span>backend to do string replace on bundle for subdomain</li>
<li><span class="done0"></span>backend to ship bundle to web3</li>
<li><span class="done4"></span>update fleek build path</li>
<li><span class="done4"></span>webpack create two bundles</li>
<li>[-] inline css/js into single html file:
<ul>
<li><a href="https://stackoverflow.com/questions/64206486/how-to-use-webpack-to-inline-css-and-js-into-html-and-remove-unused-styles">https://stackoverflow.com/questions/64206486/how-to-use-webpack-to-inline-css-and-js-into-html-and-remove-unused-styles</a></li>
<li><a href="https://github.com/JustAGuyCoding/spotlight-webpack">https://github.com/JustAGuyCoding/spotlight-webpack</a></li>
<li><a href="https://github.com/jantimon/html-webpack-plugin#writing-your-own-templates">https://github.com/jantimon/html-webpack-plugin#writing-your-own-templates</a></li>
<li><a href="https://www.npmjs.com/package/style-ext-html-webpack-plugin">https://www.npmjs.com/package/style-ext-html-webpack-plugin</a></li>
</ul></li>
</ul></li>
<li><span class="done0"></span>form validations</li>
<li><span class="done0"></span>serverless function accept profile data</li>
<li><span class="done0"></span>user page preview</li>
<li><span class="done0"></span>marketing/landing page</li>
</ul>
<h2 id="Admin">Admin</h2>
<ul>
<li><span class="done0"></span>move email hosting somewhere else (current host only allows one user and I'm trying not to dox myself)</li>
<li><span class="done0"></span>deploy latest SiteManager contract</li>
<li><span class="done0"></span>new name</li>
</ul>
<h2 id="Bugs">Bugs</h2>
<ul>
<li><span class="done0"></span>if the domain search triggers while backspacing and the user completely empties the input box, validation status of the intermediate search still exists</li>
<li><span class="done4"></span>if selecting a wallet and metamask is not connected, the profile icon still shows but is empty, button never returns</li>
<li><span class="done0"></span>validation icon does not always match the provided value, can happen when typing too slow</li>
<li><span class="done0"></span>on confirmation screen, the avatar has a higher index then the connect wallet modal</li>
<li><span class="done0"></span>final button should just say publish but trigger connect wallet if not connected</li>
<li><span class="done0"></span>avatar does not seem to be saved, a recent example:
<ul>
<li><a href="https://ropsten.etherscan.io/address/0x42D63ae25990889E35F215bC95884039Ba354115#readContract">https://ropsten.etherscan.io/address/0x42D63ae25990889E35F215bC95884039Ba354115#readContract</a>
<ul>
<li>call <code>text</code> with <code>0x594aa35033eb33efbdf97912b440c4dac7e476b596a4fe03564dd55ccd76cc8c</code> and <code>avatar</code></li>
</ul></li>
<li>Transaction: <a href="https://ropsten.etherscan.io/tx/0x4886559fce4053c79a974dae0925379d1ea6ba27c02ec5db5750889dae1c68a8">https://ropsten.etherscan.io/tx/0x4886559fce4053c79a974dae0925379d1ea6ba27c02ec5db5750889dae1c68a8</a></li>
<li>I think its being missed in the publish routine based on the input data</li>
</ul></li>
<li><span class="done0"></span>deploy function does <em>zero</em> checks on subdomain value before replacing in an HTML file. Need to sanitize so that we're not a vector for malware</li>
</ul>
<h2 id="L2 notes">L2 notes</h2>
<p>L2 subdomains are pretty straightforward but the biggest gap is a lack of support from clients. We would want to have support in Metamask, mobile wallets, and Cloudflare's CDN thing before going down this path. We <em>could</em> do L1 subdomains with L2 record resolvers. This would require two transactions: one on L1 and one on L2. We could have the user pay the gas fees plus a small fee to register an L1 subdomain then use the profits to update the rest of the records on L2. To avoid getting cleaned out, we would only do the initial record setting. Any changes would be on the user to perform from their wallet.</p>
<p>Optimism setup:</p>
<ul>
<li><a href="https://community.optimism.io/docs/developers/tutorials.html">https://community.optimism.io/docs/developers/tutorials.html</a></li>
<li><a href="https://github.com/ethereum-optimism/optimism-tutorial/tree/main/hardhat">https://github.com/ethereum-optimism/optimism-tutorial/tree/main/hardhat</a></li>
<li>blocked because openvpn and docker-compose not playing nicely</li>
</ul>
</main>

<footer>
<p>
Unless otherwise noted on the page, text is <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> and original code samples are under  <a href="https://choosealicense.com/licenses/unlicense/">Unlicense</a>.
</p>
</footer>
</body>
</html>
